# Ollama å®‰è£…ä¸é…ç½® - Linux ç³»ç»Ÿç¯‡

## ç®€ä»‹

æœ¬èŠ‚å­¦ä¹ å¦‚ä½•åœ¨ Linux ç³»ç»Ÿä¸­å®Œæˆ Ollama çš„å®‰è£…ä¸é…ç½®ï¼Œä»¥åŠå¯¹ Ollama æ›´æ–°ï¼Œç‰¹å®šç‰ˆæœ¬çš„å®‰è£…ï¼ŒæŸ¥çœ‹æ—¥å¿—å’Œå¸è½½ã€‚

## ä¸€ã€å¿«é€Ÿå®‰è£…

> Ollama ä¸‹è½½ï¼šhttps://ollama.com/download
> 
> Ollama å®˜æ–¹ä¸»é¡µï¼šhttps://ollama.com
> 
> Ollama å®˜æ–¹ GitHub æºä»£ç ä»“åº“ï¼š[https://github.com/ollama/ollama/](https://github.com/ollama/ollama)
> 
> å®˜ç½‘æä¾›äº†ä¸€æ¡å‘½ä»¤è¡Œå¿«é€Ÿå®‰è£…çš„æ–¹æ³•ã€‚

![](../images/C2-3-1.png)

```shell
curl -fsSL https://ollama.com/install.sh | sh
```

![](../images/C2-3-2.png)

æ­¤å‘½ä»¤å°†è‡ªåŠ¨ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ Ollama å¹¶å®Œæˆå®‰è£…ï¼Œä»¥ä¸‹æ˜¯ Ollama ä½¿ç”¨å¸¸è§çš„æŒ‡ä»¤ï¼š

```bash

ollama serve         #å¯åŠ¨ollama
ollama create        #ä»æ¨¡å‹æ–‡ä»¶åˆ›å»ºæ¨¡å‹
ollama show          #æ˜¾ç¤ºæ¨¡å‹ä¿¡æ¯
ollama run           #è¿è¡Œæ¨¡å‹
ollama pull          #ä»æ³¨å†Œè¡¨ä¸­æ‹‰å–æ¨¡å‹
ollama push          #å°†æ¨¡å‹æ¨é€åˆ°æ³¨å†Œè¡¨
ollama list          #åˆ—å‡ºæ¨¡å‹
ollama cp            #å¤åˆ¶æ¨¡å‹
ollama rm            #åˆ é™¤æ¨¡å‹
ollama help          #è·å–æœ‰å…³ä»»ä½•å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯
```

- éªŒè¯å®‰è£…å®Œæˆï¼Œåœ¨ `Exec` å¤„è¾“å…¥ï¼š

```bash
ollama -h
```

è¾“å‡ºå¦‚ä¸‹ï¼šå³è¡¨ç¤ºå®‰è£…æˆåŠŸğŸ‰

![](../images/C2-3-3.png)

- å¼€å¯å¹¶ä½¿ç”¨ Ollama

é¦–å…ˆï¼Œåœ¨ç»ˆç«¯ä¸­å¼€å¯ Ollamaï¼Œå¹¶åœ¨åå°æŒ‚èµ·

```shell
ollama serve
```

![](../images/C2-3-4.png)

>  [library (ollama.com)](https://ollama.com/library)è¿™é‡Œæ˜¯ Ollama çš„æ¨¡å‹åº“ï¼Œæœç´¢ä½ æƒ³è¦çš„æ¨¡å‹ï¼Œå¼€å¯æ–°çš„ç»ˆç«¯ï¼Œå¯åŠ¨ï¼

```bash
ollama run llama3
```

> ä¸‹è½½é€Ÿåº¦å–å†³äºä½ çš„å¸¦å®½ï¼Œä¸‹è½½å®Œæ¯•å³å¯ä½¿ç”¨âœŒè®°å¾—ä½¿ç”¨ `control + D` é€€å‡ºèŠå¤©

![](../images/C2-3-5.png)

## äºŒã€æ‰‹åŠ¨å®‰è£…
> æ³¨æ„ï¼š å¦‚æœä¹‹å‰å·²ç»å®‰è£…äº†æ—§ç‰ˆæœ¬çš„ollamaï¼Œé‚£ä¹ˆéœ€è¦å…ˆå®Œæˆæ‰‹åŠ¨å¸è½½ï¼Œ`sudo rm -rf /usr/lib/ollama`
> æ›´å¤šéœ€æ±‚ğŸ‘‰å‚è€ƒ[å®˜ç½‘](https://github.com/ollama/ollama/blob/main/docs/linux.md)

### 2.1 ä¸‹è½½å¹¶è§£å‹ä¸æ“ä½œç³»ç»ŸåŒ¹é…çš„å®‰è£…åŒ…

```shell
curl -L https://ollama.com/download/ollama-linux-amd64.tgz -o ollama-linux-amd64.tgz
sudo tar -C /usr -xzf ollama-linux-amd64.tgz
```

**AMD GPU**ä¸‹è½½ï¼š

```shell
curl -L https://ollama.com/download/ollama-linux-amd64-rocm.tgz -o ollama-linux-amd64-rocm.tgz
sudo tar -C /usr -xzf ollama-linux-amd64-rocm.tgz
```

**ARM 64**ä¸‹è½½ï¼š

```shell
curl -L https://ollama.com/download/ollama-linux-arm64.tgz -o ollama-linux-arm64.tgz
sudo tar -C /usr -xzf ollama-linux-arm64.tgz
```

### 2.2 å¯åŠ¨ Ollamaå¹¶éªŒè¯

è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Ollamaï¼š

```shell
ollama serve
```

å¦å¼€å¯ä¸€ä¸ªç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼ŒéªŒè¯ollamaæ˜¯å¦è¿è¡ŒæˆåŠŸ
```shell
ollama -v
```

### 2.3 å°† Ollama æ·»åŠ ä¸ºè‡ªå¯åŠ¨æœåŠ¡ï¼ˆæ¨èï¼‰

é¦–å…ˆï¼Œä¸º Ollama åˆ›å»ºç”¨æˆ·å’Œç»„ï¼š

```shell
sudo useradd -r -s /bin/false -U -m -d /usr/share/ollama ollama
sudo usermod -a -G ollama $(whoami)
```

ç„¶ååœ¨è¯¥ä½ç½®ï¼š`/etc/systemd/system/ollama.service` åˆ›å»ºæœåŠ¡æ–‡ä»¶

```ini
[Unit]
Description=Ollama Service
After=network-online.target

[Service]
ExecStart=/usr/bin/ollama serve
User=ollama
Group=ollama
Restart=always
RestartSec=3
Environment="PATH=$PATH"

[Install]
WantedBy=default.target
```

æœ€åå¯åŠ¨æœåŠ¡ï¼š

```shell
sudo systemctl daemon-reload
sudo systemctl enable ollama
```


## ä¸‰ã€æ›´æ–°

å†æ¬¡è¿è¡Œä¹‹å‰çš„å®‰è£…è¯­å¥æ¥æ›´æ–° Ollamaï¼š

```shell
curl -fsSL https://ollama.com/install.sh | sh
```

æˆ–è€…é‡æ–°ä¸‹è½½æœ€æ–°çš„OllamaåŒ…ï¼š

```shell
curl -L https://ollama.com/download/ollama-linux-amd64.tgz -o ollama-linux-amd64.tgz
sudo tar -C /usr -xzf ollama-linux-amd64.tgz
```

## å››ã€å®‰è£…ç‰¹å®šç‰ˆæœ¬

è®¾ç½® `OLLAMA_VERSION`å­—æ®µï¼Œï¼Œå¯ä»¥å®‰è£…å¯¹åº”çš„ç‰ˆæœ¬

```
curl -fsSL https://ollama.com/install.sh | OLLAMA_VERSION=0.5.7 sh
```

## äº”ã€æŸ¥çœ‹æ—¥å¿—

æŸ¥çœ‹ä½œä¸ºå¯åŠ¨æœåŠ¡è¿è¡Œçš„ Ollama çš„æ—¥å¿—ï¼š

```shell
journalctl -e -u ollama
```

## å…­ã€å¸è½½

- åˆ é™¤ Ollama æœåŠ¡ï¼š

```shell
sudo systemctl stop ollama
sudo systemctl disable ollama
sudo rm /etc/systemd/system/ollama.service
```

- ä» bin ç›®å½•ä¸­åˆ é™¤ Ollama äºŒè¿›åˆ¶æ–‡ä»¶ï¼š `/usr/local/bin `,`/usr/bin` ,`/bin`

```shell
sudo rm $(which ollama)
```

- åˆ é™¤ä¸‹è½½çš„æ¨¡å‹å’Œ Ollama æœåŠ¡ç”¨æˆ·å’Œç»„ï¼š

```shell
sudo rm -r /usr/share/ollama
sudo userdel ollama
sudo groupdel ollama
```

- åˆ é™¤ä¸‹è½½çš„åº“æ–‡ä»¶
```shell
sudo rm -rf /usr/local/lib/ollama
```
